

trigger:
- main

variables:
  # Agent VM image name
  vmImageName: 'ubuntu-latest'

name: Infra Provisioning CI/CD

stages: 
    - stage: ProvisionInfra 
      displayName: Provision Infrra
      jobs: 
      - job: TerraformProvisioning
        displayName: Terraform Provisioning
        pool:
          vmImage: $(vmImageName)
        steps:
          - task: TerraformInstaller@0
            inputs:
              terraformVersion: '1.3.8'

          - script: echo Hello, world!
            displayName: 'Run a one-line script'

          - script: |
              echo Add other tasks to build, test, and deploy your project.
              echo See https://aka.ms/yaml
            displayName: 'Run a multi-line script'
